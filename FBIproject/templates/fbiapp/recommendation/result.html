{% extends 'fbiapp/base.html' %}
{% load static %}

{% block content %}

<script src="https://code.jquery.com/jquery-3.2.1.min.js"></script>
<script src="https://cdnjs.cloudflare.com/ajax/libs/Chart.js/2.6.0/Chart.js"></script>
<!-- <script src="https://cdnjs.cloudflare.com/ajax/libs/Chart.js/3.6.0/chart.min.js" integrity="sha512-GMGzUEevhWh8Tc/njS0bDpwgxdCJLQBWG3Z2Ct+JGOpVnEmjvNx6ts4v6A2XJf1HOrtOsfhv3hBKpK9kE5z8AQ==" crossorigin="anonymous" referrerpolicy="no-referrer"></script>
<script src="https://cdnjs.cloudflare.com/ajax/libs/chartjs-plugin-datalabels/2.0.0-rc.1/chartjs-plugin-datalabels.min.js" integrity="sha512-+UYTD5L/bU1sgAfWA0ELK5RlQ811q8wZIocqI7+K0Lhh8yVdIoAMEs96wJAIbgFvzynPm36ZCXtkydxu1cs27w==" crossorigin="anonymous" referrerpolicy="no-referrer"></script> -->
<link rel="stylesheet" href="https://maxcdn.bootstrapcdn.com/bootstrap/4.1.3/css/bootstrap.min.css">
<script src="https://ajax.googleapis.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
<script src="https://cdnjs.cloudflare.com/ajax/libs/popper.js/1.14.3/umd/popper.min.js"></script>
<script src="https://maxcdn.bootstrapcdn.com/bootstrap/4.1.3/js/bootstrap.min.js"></script>

<!-- Wrapper -->
<div id="wrapper">
    <!-- Header -->
        <header id="header">
            <div id="chart-carousel" class="carousel slide" data-ride="carousel">
 
                <!-- Wrapper for slides -->
                <div class="carousel-inner">
                  <div class="carousel-item active">  
                    <canvas id="chartContainer1" class="chart" style="width:100%; height:500px;"></canvas>
                  </div>
                  <div class="carousel-item">
                    <canvas id="chartContainer2" class="chart" style="width:100%; height:500px;"></canvas>
                  </div>
                  <div class="carousel-item">
                   <canvas id="chartContainer3" class="chart" style="width:100%; height:500px;"></canvas>
                  </div>
                  <div class="carousel-item">
                    <canvas id="chartContainer4" class="chart" style="width:100%; height:500px;"></canvas>
                  </div>
                  <div class="carousel-item">
                   <canvas id="chartContainer5" class="chart" style="width:100%; height:500px;"></canvas>
                  </div>
                </div>
               
               <!-- Left and right controls -->
                <a class="carousel-control-prev" href="#chart-carousel" data-slide="prev">
                  <span class="carousel-control-prev-icon"></span>
                </a>
                <a class="carousel-control-next" href="#chart-carousel" data-slide="next">
                  <span class="carousel-control-next-icon"></span>
                </a>
              </div> 
        </header>
    <!-- Footer -->
        <footer id="footer">
            <p class="copyright">&copy; 충북대학교 소프트웨어학과 캡스톤디자인 16팀 스쿨피자 <a href="https://github.com/SchoolPizza">Github</a>.</p>
        </footer>
</div>
<script type="text/javascript">

    // 차트 데이터 - view에서 넘겨주는 변수 
    // '생리량', '생리통', '냄새', '신체활동', '실내활동'
    var chartData1 = {{ datasets1 }}
    var chartData2 = {{ datasets2 }}
    var chartData3 = {{ datasets3 }}
    var chartData4 = {{ datasets4 }}
    var chartData5 = {{ datasets5 }}

    var charts = [];
    var chart, width, width;
    
    width = $('#chart-carousel').width();
    height = $('#chart-carousel').height();

    $('.carousel').carousel({
        interval: 5000
    });

    // 차트 1번 생리량
    chart = new Chart(document.getElementById("chartContainer1"), {
        plugins: [{
            beforeInit: function(chart, options) {
            chart.legend.afterFit = function() {
                this.height = this.height + 30;
            };
            }
        }],
        type: 'pie',
        data: {
            labels: ["아주 적음","적음", "보통", "많음", "아주 많음"],
            datasets: [{ 
                label: "생리량",
                backgroundColor: ["rgba(42,44,59,0.8)", "rgba(84,102,240,0.6)", "rgba(72,91,240,0.6)", "rgba(33,48,163,0.6)", "rgba(60,81,240,0.6)"],
                data: chartData1
            }]
        }, 
        // plugins: [ChartDataLabels],
        options: {
            elements: {
                arc: {
                    borderWidth: 0.4
                }
            },
            legend: { 
                display: true,
                position: 'top',
                labels : {
                    fontColor : 'rgba(255,255,255,0.7)',
                    boxWidth: 20,
                    padding: 20,
                },
             },
            title: {
                display: true,
                text: "생리량",
                fontColor : '#FFFFFF',
                fontSize: 20,
                fontstyle: 'bold',
                position: 'top',
            },
        },
    });
    chart.render();
    charts.push(chart);
    
    // // 차트 2번 생리통
    chart = new Chart(document.getElementById("chartContainer2"), {
        plugins: [{
            beforeInit: function(chart, options) {
            chart.legend.afterFit = function() {
                this.height = this.height + 30;
            };
            }
        }],
        type: 'pie',
        data: {
            labels: ["통증 없음","조금 아픔", "아픔", "많이 아픔", "매우 아픔"],
            datasets: [{ 
                label: "생리통",
                backgroundColor: ["rgba(42,44,59,0.8)", "rgba(84,102,240,0.6)", "rgba(72,91,240,0.6)", "rgba(33,48,163,0.6)", "rgba(60,81,240,0.6)"],
                data: chartData2
            }]
        }, 
        options: {
            elements: {
                arc: {
                    borderWidth: 0.4
                }
            },
            legend: { 
                display: true,
                position: 'top',
                labels : {
                    fontColor : 'rgba(255,255,255,0.7)',
                    boxWidth: 20,
                    padding: 20
                },
             },
            title: {
                display: true,
                text: "생리통",
                fontColor : '#FFFFFF',
                fontSize: 20,
                fontstyle: 'bold',
                position: 'top',
            },
        },
    });
    chart.render();
    charts.push(chart);
    
    // // 차트 3번 냄새
    chart = new Chart(document.getElementById("chartContainer3"), {
        plugins: [{
            beforeInit: function(chart, options) {
            chart.legend.afterFit = function() {
                this.height = this.height + 30;
            };
            }
        }],
        type: 'pie',
        data: {
            labels: ["아주 약함","약함", "보통(냄)", "강함", "아주 강함"],
            datasets: [{ 
                label: "냄새",
                backgroundColor: ["rgba(42,44,59,0.8)", "rgba(84,102,240,0.6)", "rgba(72,91,240,0.6)", "rgba(33,48,163,0.6)", "rgba(60,81,240,0.6)"],
                data: chartData3
            }]
        }, 
        options: {
            elements: {
                arc: {
                    borderWidth: 0.4
                }
            },
            legend: { 
                display: true,
                position: 'top',
                labels : {
                    fontColor : 'rgba(255,255,255,0.7)',
                    boxWidth: 20,
                    padding: 20
                },
             },
            title: {
                display: true,
                text: "냄새",
                fontColor : '#FFFFFF',
                fontSize: 20,
                fontstyle: 'bold',
                position: 'top',
            },
        },
    });
    chart.render();
    charts.push(chart);
    
    // // 차트 4번 신체활동
    chart = new Chart(document.getElementById("chartContainer4"), {
        plugins: [{
            beforeInit: function(chart, options) {
            chart.legend.afterFit = function() {
                this.height = this.height + 30;
            };
            }
        }],
        type: 'pie',
        data: {
            labels: ['달리기', '자전거 타기', '헬스', '댄스', '요가'],
            datasets: [{ 
                label: "신체활동",
                backgroundColor: ["rgba(42,44,59,0.8)", "rgba(84,102,240,0.6)", "rgba(72,91,240,0.6)", "rgba(33,48,163,0.6)", "rgba(60,81,240,0.6)"],
                data: chartData4
            }]
        }, 
        options: {
            elements: {
                arc: {
                    borderWidth: 0.4
                }
            },
            legend: { 
                display: true,
                position: 'top',
                labels : {
                    fontColor : 'rgba(255,255,255,0.7)',
                    boxWidth: 20,
                    padding: 20
                },
             },
            title: {
                display: true,
                text: "신체활동",
                fontColor : '#FFFFFF',
                fontSize: 20,
                fontstyle: 'bold',
                position: 'top',
            },
        },
    });
    chart.render();
    charts.push(chart);
    
    // // 차트 5번 실내활동
    chart = new Chart(document.getElementById("chartContainer5"), {
        plugins: [{
            beforeInit: function(chart, options) {
            chart.legend.afterFit = function() {
                this.height = this.height + 30;
            };
            }
        }],
        type: 'pie',
        data: {
            labels: ['TV보기', '동영상 시청', '독서', '아이돌보기', '친구와 통화하기', '공부하기'],
            datasets: [{ 
                label: "실내활동",
                backgroundColor: ["rgba(42,44,59,0.8)", "rgba(84,102,240,0.6)", "rgba(72,91,240,0.6)", "rgba(33,48,163,0.6)", "rgba(60,81,240,0.6)", "rgba(240,208,52,0.8)"],
                data: chartData5
            }]
        }, 
        options: {
            elements: {
                arc: {
                    borderWidth: 0.4
                }
            },
            legend: { 
                display: true,
                position: 'top',
                labels : {
                    fontColor : 'rgba(255,255,255,0.7)',
                    boxWidth: 20,
                    padding: 20
                },
             },
            title: {
                display: true,
                text: "실내활동",
                fontColor : '#FFFFFF',
                fontSize: 20,
                fontstyle: 'bold',
                position: 'top',
            },
        },
    });
    chart.render();
    charts.push(chart);

    $(window).resize(function() {
    for(var i = 0; i < charts.length; i++) {
        charts[i].options.width = $('.carousel').width();
        charts[i].options.height = $('.carousel').height();
        charts[i].render();
    }
});
    


</script>

<!-- BG -->
    <div id="bg"></div>


{% endblock content %}